/* App Shell Layout */
.app { border-radius: var(--app-border-radius); overflow:hidden; display:flex; flex-direction:column; background: rgba(var(--bg), var(--bg-opacity)); height:calc(100vh - (var(--app-shadow-size) * 2)); margin: var(--app-shadow-size); box-shadow: inset 0 0 1px 1px var(--app-border-color), var(--app-shadow-color) 0 2px var(--app-shadow-size) 0; }
.app::before { content:""; position:absolute; inset:0; background: var(--color-bg-solid); z-index:-1; }

.maximized {
    --app-shadow-size: 0px;
    box-shadow: none;
    border: none;
    border-radius: 0;
}
.maximized .tb-btn{
    border: none;
}

.window-body { overflow:hidden; width:100%; height:100%; display:flex; flex-direction:column; gap:var(--footer-gap); }
.content { padding:0 var(--padding-sm); display:flex; width:100%; height:100%; min-width:0; min-height:0; overflow:hidden; box-sizing:border-box; }
.content .left-panel, .content .right-panel { flex:0 0 auto; }
.center-area { flex:1 1 auto; min-width:0; display:flex; flex-direction:column; gap:12px; position:relative; border-radius:var(--app-border-radius); overflow:hidden; clip-path: inset(0 round var(--app-border-radius)); isolation:isolate; contain:paint; }
.center-area .center-tabs { flex:1 1 auto; min-width:0; width:100%; }

/* Panels */
.left-panel, .right-panel { border-radius: var(--app-border-radius); width:220px; box-sizing:border-box; display:flex; flex-direction:column; min-height:0; overflow:hidden; }
.rt-header{ margin: 8px 0;}
.rt-header,.shelf-title,.shelf-cards{padding: 0 var(--padding-md);}
.main-panels { background: var(--panels-bg); transition: width 0.2s ease; }
.bottom-player { height: var(--footer-height); background: var(--surface-2); border-top: 1px solid var(--border-strong); }

/* Disable transition while actively resizing (handle :active or global .is-resizing flag) */
.is-resizing .main-panels,
.resize-handle:active + .main-panels,
.main-panels + .resize-handle:active,
.resize-handle:active ~ .main-panels { transition: none !important; }
.main-panels.collapsed { width:56px; overflow-x: hidden; }
.main-panels .panel-collapse-toggle { cursor:pointer; font-size:12px; padding:4px; }

/* Resize Handle */
.resize-handle { width:10px; flex:0 0 10px; cursor:col-resize; position:relative; display:flex; align-items:center; justify-content:center; user-select:none; background:transparent; z-index:30; touch-action:none; min-width:6px !important; }
.resize-handle::before { content:""; width:2px; height:100%; border-radius:2px; background: linear-gradient(#fff, color-mix(in srgb,#fff 70%, #000)); opacity:0; transition:opacity .2s; }
.resize-handle:hover::before, .resize-handle:focus::before, .resize-handle:active::before { opacity:.85; }
.resize-handle.disabled { cursor:default; }
.resize-handle.disabled::before { opacity:0; }
.resize-handle::after { content:""; position:absolute; left:-4px; right:-4px; top:0; bottom:0; }

/* Splash */
.app-loading { position:absolute; inset:0; display:flex; align-items:center; justify-content:center; background:transparent; z-index:1000; }
.app-loading img { filter: drop-shadow(0 8px 28px rgba(0 0 0 / .55)); }
.app-loading .splash-box { position:relative; width:400px; height:300px; display:flex; align-items:center; justify-content:center; }
.app-loading .splash-box img { width:100%; height:100%; object-fit:contain; pointer-events:none; user-select:none; }
.app-loading .splash-status { position:absolute; bottom:10px; left:0; right:0; text-align:center; font-size:12px; letter-spacing:.5px; font-family: system-ui, sans-serif; color:#cfe4ff; text-shadow:0 2px 4px rgba(0 0 0 / .6); opacity:.9; animation:splash-status-pulse 2.4s ease-in-out infinite; }
@keyframes splash-status-pulse { 0%,100% { opacity:.9 } 50% { opacity:.55 } }
