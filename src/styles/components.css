/* Generic Components: buttons, cards, lists, chips */
.btn { background: var(--accent); color:#021; padding:8px 12px; border-radius: var(--radius-sm); border:none; cursor:pointer; font:inherit; transition: background var(--dur-med) var(--ease-standard), transform var(--dur-med) var(--ease-standard); }
.btn:hover { filter: brightness(1.1); }
.btn:active { transform: scale(.95); }

.column { background: var(--card); padding:12px; border-radius: var(--app-border-radius); min-width:280px; }
.list { margin-top:12px; display:flex; flex-direction:column; gap:8px; }
.item { padding:var(--padding-sm); border-radius: var(--radius-sm); display:flex; justify-content:space-between; align-items:center; }

/* Chips */
.chip, .np-tags .tag, .np-pill { background: var(--glass-bg); border:1px solid var(--glass-border); color:var(--text); font-size:11px; padding:6px 10px; line-height:1; border-radius:24px; cursor:pointer; letter-spacing:.5px; transition: background var(--dur-med), border-color var(--dur-med); }
.chip:hover, .np-pill:hover { background: var(--surface-hover); border-color: var(--glass-border-hover); }

/* Media Cards */
.media-row { --row-mask:#fff; display:flex; gap:18px; flex-wrap:nowrap; overflow:auto; padding:6px 4px; mask: linear-gradient(to right, var(--row-mask)); -webkit-mask: linear-gradient(to right, var(--row-mask)); -moz-mask: linear-gradient(to right, var(--row-mask)); }
.media-row-overflow-right{ --row-mask:#fff 90%, #fff0; }
.media-row-overflow-left{ --row-mask:#fff0 0%, #fff 10%; }
.media-row-overflow-both{ --row-mask:#fff0 0%, #fff 10%, #fff 90%, #fff0; }
.media-row.dense { gap:14px; } .media-row.artists { gap:22px; }
.media-row.scroll-x { scrollbar-width:none; scroll-snap-type:x proximity; } .media-row.scroll-x::-webkit-scrollbar { display:none; }
.media-row-wrap { --mask: #fff; position:relative; display:flex; align-items:stretch; }
.media-row-wrap .media-row { flex:1 1 auto; scroll-behavior:smooth; mask: linear-gradient(to right, var(--mask)); }
.media-row.scroll-x > * { scroll-snap-align:start; }
.np-icon.scroll-btn {
  position: absolute;
  opacity: 0;
  pointer-events: none;
  z-index: 3;
  backdrop-filter: blur(30px);
  top: 6px;
  height: calc(100% - 12px);
  width: 40px;
  box-shadow: 0 4px 10px #0003;
  background: #fff2;
}
.track-player .meta{
  border: solid 1px #fff0;
  max-width:250px;
}
.np-icon:hover, .np-pill:hover, input[type="text"]:hover, .pl-item:hover, .tb-nav-btn:hover, .media-card:hover, .track-player .meta:hover, .chip:hover, .np-tags:not(.disabled) .tag:hover, .np-tracklist li:hover, .card-btn:hover {
  border-color: var(--accent) !important;
  filter: drop-shadow(0 0 0 var(--accent));
}
.scroll-btn.left { left: 0; }
.scroll-btn.right { right: 0; }

/* .media-row-wrap:hover .scroll-btn { opacity:1; pointer-events:auto; } */
.scroll-btn:focus-visible { opacity:1; pointer-events:auto; }

/* Overflow state classes to allow gradient edge hints or button visibility tweaks */
.media-row-wrap.media-row-overflow-right:hover .scroll-btn.right,
.media-row-wrap.media-row-overflow-left:hover .scroll-btn.left,
.media-row-wrap.media-row-overflow-both:hover .scroll-btn { opacity:1; pointer-events:auto; }

/* Optional subtle edge fade */
.media-row-wrap.media-row-overflow-right { --mask: #fff 80%, #fff0; }
.media-row-wrap.media-row-overflow-left { --mask: #fff0 0%, #fff 20%; }
.media-row-wrap.media-row-overflow-both { --mask: #fff0 0%, #fff 20%, #fff 80%, #fff0; }

.media-card { background: var(--surface-3); border:1px solid var(--border-subtle); border-radius:var(--radius-xl); padding:14px 14px 16px; width:160px; flex:0 0 auto; display:flex; flex-direction:column; gap:10px; cursor:pointer; transition: background var(--dur-med), border-color var(--dur-med), transform var(--dur-med); }

/* Shared compact + circle width */
.media-card.compact,
.media-card.is-circle { width:140px; }
.media-card.compact { padding:10px 10px 12px; border-radius:14px; gap:6px; }
.media-card:hover { background: rgba(255,255,255,0.08); border-color: rgba(255,255,255,0.18); transform:translateY(-4px); }
.media-card:active { transform:translateY(-1px); }

.media-cover { position:relative; width:100%; aspect-ratio:1/1; border-radius:14px; overflow:hidden; background:var(--surface-hover); box-shadow:0 6px 18px -6px rgba(0 0 0 / .5), 0 2px 6px rgba(0 0 0 / .35); display:flex; align-items:center; justify-content:center; }
.media-cover.square,
.media-cover.tiny { border-radius:12px; }
.media-cover.circle { border-radius:50%; }
.media-cover.tiny { height:56px; width:56px; }
.media-cover img { width:100%; height:100%; object-fit:cover; display:block; }

.media-title { margin:0; font-size:14px; font-weight:600; letter-spacing:.4px; line-height:1.25; }
.media-meta { margin:0; font-size:11px; opacity:.7; line-height:1.2; }

.media-progress { position:relative; height:5px; background:rgba(255,255,255,0.08); border-radius:4px; overflow:hidden; margin-top:2px; }
.media-progress span { position:absolute; inset:0; width:var(--p,40%); background:var(--accent); border-radius:inherit; box-shadow:0 0 0 1px rgba(0,0,0,.25) inset; }

.media-card.is-circle .media-cover { margin-bottom:4px; }
.media-card.is-circle .media-title,
.media-card.is-circle .media-meta { text-align:center; }

.media-card.compact .media-cover.tiny { margin-bottom:2px; }
.media-card.compact .media-title { font-size:13px; }
.media-card.compact .media-meta { font-size:10px; }

.chip-grid { display:grid; gap:10px; grid-template-columns:repeat(auto-fill,minmax(140px,1fr)); }
.chip-grid .chip { justify-content:flex-start; width:100%; text-align:left; font-size:12px; padding:10px 14px; border-radius:30px; background:var(--surface-3); border:1px solid rgba(255,255,255,0.1); }
.chip-grid .chip:hover { background:rgba(255,255,255,0.12); border-color:rgba(255,255,255,0.2); }

/* Queue drag handle & states */
.np-queue-list li { position:relative; }
.np-queue-list li .queue-drag-handle { background:transparent; border:0; color:var(--text); width:30px; height:30px; border-radius:var(--radius-sm); display:inline-flex; align-items:center; justify-content:center; cursor:grab; margin-left:8px; padding:0; }
.np-queue-list li .queue-drag-handle:hover { background:transparent; }
.np-queue-list li.drag-from { opacity:0.4; }
.np-queue-list li.drag-over { outline:1px dashed var(--accent); outline-offset:2px; }

@media (max-width:900px){
  .media-card { width:140px; }
  .media-card.compact { width:120px; }
}

/* Playlist Library */
.pl-controls input[type="text"], .pl-controls select, .pl-controls input[type="color"] { background:rgba(255,255,255,0.05); border:1px solid rgba(255,255,255,0.08); color:var(--text); font:inherit; font-size:12px; border-radius:var(--radius-sm); padding:var(--padding-xs) var(--padding-sm); outline:none; transition:border-color var(--dur-med), background var(--dur-med); }
.pl-controls input[type="text"]:hover, .pl-controls select:hover { background:rgba(255,255,255,0.08); }
.pl-controls input[type="text"]:focus, .pl-controls select:focus { border-color:var(--accent); background:rgba(0,0,0,0.35); box-shadow:0 0 0 1px var(--accent); }
.pl-container { display:flex; flex-direction:column; gap:6px; max-height:calc(100vh - 220px); overflow:auto; padding-right:2px; }
.pl-list.compact .pl-item { padding:4px 6px; gap:6px; }
.pl-list .pl-item { display:flex; align-items:center; gap:10px; background:var(--surface-1); border:1px solid var(--border-subtle); border-radius:var(--radius-sm); padding:8px 10px; position:relative; transition: background var(--dur-med), border-color var(--dur-med), transform var(--dur-med); cursor:pointer; }
.pl-list .pl-item:hover { background:rgba(255,255,255,0.07); border-color:rgba(255,255,255,0.18); }
.pl-list .pl-item.active { background: var(--glass-border-strong); border-color:#fff0; color:#021; }
.pl-list .pl-item.active .pl-name { color:#021; }
.pl-list .pl-item.active .pl-sub { opacity:.85; }
.pl-list.compact .pl-name { font-size:12px; }
.pl-thumb { width:36px; height:36px; border-radius:10px; background:linear-gradient(135deg,var(--accent), color-mix(in srgb, var(--accent) 60%, #111)); display:flex; align-items:center; justify-content:center; font-weight:600; font-size:13px; letter-spacing:.5px; color:var(--text); box-shadow:0 2px 4px -1px rgba(0,0,0,.5); flex-shrink:0; }
.pl-thumb.pl-favorites {
    --accent: var(--secondary);
}
.pl-item:hover .pl-thumb { filter:brightness(1.1); }
.pl-meta { flex:1 1 auto; display:flex; flex-direction:column; min-width:0; }
.pl-name { font-size:13px; font-weight:600; letter-spacing:.4px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.pl-sub { font-size:10px; opacity:.6; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.pl-del { position:absolute; top:4px; right:4px; background:rgba(0,0,0,.35); border:1px solid rgba(255,255,255,0.08); color:var(--text); border-radius:6px; cursor:pointer; width:20px; height:20px; font-size:13px; line-height:1; display:flex; align-items:center; justify-content:center; opacity:0; transition:opacity var(--dur-med), background var(--dur-med); }
.pl-item:hover .pl-del { opacity:1; }
.pl-del:hover { background:rgba(255,255,255,0.1); }
.pl-grid { display:grid; gap:10px; }
.pl-grid.sm { grid-template-columns:repeat(auto-fill,minmax(120px,1fr)); }
.pl-grid.lg { grid-template-columns:repeat(auto-fill,minmax(170px,1fr)); }
.pl-grid .material-symbols-rounded {zoom:2;}
.pl-grid.lg .pl-thumb, .pl-grid.lg .material-symbols-rounded {font-size: 40px;}
.pl-grid .pl-item { flex-direction:column; align-items:stretch; padding:12px 12px 14px; text-align:center; border-width: 1px; }
.pl-container .material-symbols-rounded, .pl-thumb {color: var(--glass-bg-strong2);}

/* Grid layout adjustments */
.pl-grid .pl-thumb { width:100%; height:auto; aspect-ratio:1/1; border-radius:14px; font-size:20px; }
.pl-grid .pl-meta { align-items:center; }
.pl-grid .pl-name { font-size:14px; }
.pl-grid .pl-sub { font-size:11px; }
.pl-list.compact .pl-thumb { width:28px; height:28px; border-radius:var(--radius-sm); font-size:11px; }
.pl-controls .np-pill.active { background:var(--accent); color:#021; border-color:var(--accent); }
.pl-controls .np-pill { --material-opts: 'wght' 600, 'GRAD' 0, 'opsz' 0; flex:1 1 auto; text-align:center; padding:var(--padding-sm) var(--padding-xs); }

/* Global active pill styling */
.np-pill.active { background:var(--accent) !important; color:#021 !important; border-color:var(--accent) !important; }
.left-panel .pl-container::-webkit-scrollbar { width:8px; }
.left-panel .pl-container::-webkit-scrollbar-track { background:transparent; }
.left-panel .pl-container::-webkit-scrollbar-thumb { background:rgba(255,255,255,0.08); border-radius:20px; }

.left-panel .pl-container::-webkit-scrollbar-thumb:hover { background:rgba(255,255,255,0.15); }

/* Playlist Filter Popup */
.pl-filters-pop { position:absolute; top:50px; left:0; right:0; z-index:60; background:rgba(25,25,35,0.96); border:1px solid var(--border-subtle); backdrop-filter:blur(10px) saturate(160%); padding:var(--padding-md); border-radius:10px; width:auto; max-height:65vh; overflow-y:auto; box-shadow:0 6px 20px -6px rgba(0,0,0,0.65), 0 3px 10px -2px rgba(0,0,0,0.5); animation:pl-pop-enter .16s ease; }
.pl-fp-head { display:flex; align-items:center; justify-content:space-between; margin-bottom:2px; }
.pl-fp-close { background:transparent; border:0; color:inherit; cursor:pointer; display:inline-flex; align-items:center; justify-content:center; padding:4px; border-radius:var(--radius-md); }
.pl-fp-close:hover { background:rgba(255,255,255,0.08); }
.pl-fp-sec { margin-top:var(--padding-lg); }
.pl-fp-sec-title { font-size:10px; opacity:.7; text-transform:uppercase; letter-spacing:.8px; margin-bottom:4px; font-weight:600; }
.pl-tags-row, .pl-view-row, .pl-order-row { display:flex; flex-wrap:wrap; gap:6px; }
@keyframes pl-pop-enter { from { opacity:0; transform:translateY(-4px) scale(.96);} to { opacity:1; transform:translateY(0) scale(1);} }

/* Panel drag visual states */
.panel-dragging { position:relative; }
.panel-dragging::after { content:""; position:absolute; inset:0; pointer-events:none; border:2px dotted rgba(255,255,255,0.35); border-radius:inherit; }
.panel-dragging.collapse-intent::after { background:rgba(0,0,0,0.75); border-color:rgba(255,255,255,0.5); }

/* Collapsed left panel playlist thumbs */

/* Shared panel header */
.main-panels.collapsed .panel-header { justify-content:center; }
.right-panel .panel-header {
    justify-content: normal;
}
.pl-controls, .pl-container {
    padding: 0 var(--padding-md);
}

/* Shared collapsed thumbnails (used by left/right panels) */
.collapsed-thumb-list { display:flex; flex-direction:column; gap:8px; overflow-y:auto; padding-top:4px; padding-right:2px; }
.collapsed-thumb-list::-webkit-scrollbar { width:6px; }
.collapsed-thumb-list::-webkit-scrollbar-thumb { background:rgba(255,255,255,0.15); border-radius:20px; }
.collapsed-thumb-list::-webkit-scrollbar-thumb:hover { background:rgba(255,255,255,0.25); }
.collapsed-thumb-item { display:flex; justify-content:center; cursor:pointer; }
.collapsed-thumb { width:40px; height:40px; border-radius:10px; font-size:12px; background:rgba(255,255,255,0.08); display:flex; align-items:center; justify-content:center; overflow:hidden; border:1px solid #fff0; transition: background var(--dur-med), border-color var(--dur-med); }
.collapsed-thumb-item:hover .collapsed-thumb { background-color: var(--glass-bg-hover); border-color: var(--accent); }

/* Collapse toggle button (shared left/right) */
.panel-collapse-toggle {
  background:none;
  border:none;
  padding:0;
  line-height:1;
  cursor:pointer;
  color:var(--text);
  display:flex;
  align-items:center;
  justify-content:center;
}
.panel-collapse-toggle:hover {
  color:var(--accent);
}
.panel-collapse-toggle:focus-visible {
  outline:2px solid var(--accent);
  border-radius:4px;
}

/* Center queue header icon when collapsed */
.rt-panel.collapsed .rt-header { display:flex; justify-content:center; }

/* Collapsed queue styling (reuse full list) */
.rt-panel.collapsed .np-queue-list li { gap:0; }
.np-queue-list.is-collapsed li { display: flex;
    align-items: center;
    padding: 2px;
    justify-content: center; }
.np-queue-list.is-collapsed li .track { display:none !important; }
.np-queue-list.is-collapsed li .queue-drag-handle { display:none !important; }
.np-queue-list.is-collapsed li .queue-play-btn { top:50%; left:50%; transform:translate(-50%,-50%); }
.np-queue-list.is-collapsed li .queue-art { width:40px; height:40px; border-radius:10px; overflow:hidden; background:rgba(255,255,255,0.08); display:flex; align-items:center; justify-content:center; }
.np-queue-list.is-collapsed { display:flex; flex-direction:column; gap:8px; overflow-y:auto; padding-right:2px; }

