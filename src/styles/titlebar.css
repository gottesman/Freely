/* Titlebar & Search */
.titlebar { user-select:none; -webkit-user-select:none; -webkit-app-region:drag; width:100%; height:var(--header-height); display:flex; align-items:stretch; justify-content:space-between; gap:12px; position:relative; }
.titlebar-left { padding:6px 12px; }
.titlebar-left, .titlebar-right { z-index:1; -webkit-app-region:no-drag; gap:4px; display:flex; align-items:center;}
.titlebar-icon, .titlebar-icon.placeholder { width:28px; height:28px; background-size:contain; background-repeat:no-repeat; background-position:center; }
.titlebar-icon.placeholder { background: linear-gradient(135deg, var(--accent), #222); }
.titlebar-title { font-weight:600; font-size:14px; color:var(--text); }

/* Nav Buttons */
.titlebar-nav {     display: flex;
    align-items: center;
    padding: 0 4px;
    position: absolute;
    height: 38px;
    width: 100%;
    justify-content: center; }
.tb-nav-btn { background:var(--surface-2); border:1px solid var(--glass-border); color:var(--text); width:34px; height:30px; border-radius:8px; display:inline-flex; align-items:center; justify-content:center; cursor:pointer; font:inherit; padding:0; line-height:1; transition: background var(--dur-med), border-color var(--dur-med), transform var(--dur-med); }
.tb-nav-btn span { font-size:20px; }
.tb-nav-btn:hover { background:var(--glass-bg-strong); border-color:var(--glass-border-hover); }
.tb-nav-btn:active { transform:scale(.9); }
.tb-nav-btn.active { background:var(--accent) !important; color:var(--text-dark) !important; border-color:var(--accent); box-shadow:0 2px 4px -2px rgba(0,0,0,.2); }

/* Search */
.titlebar-search { flex:1 1 auto; display:flex; align-items:center; min-width:34px; position:relative; max-width:max-content; width: 34px; transition: width .2s ease; }
.tb-search-icon {
    --material-opts: 'FILL', 'wght' 400, 'GRAD' 0, 'opsz' 48;
    font-weight: 500;
    position: absolute;
    display: inline-flex;
    justify-content: center;
    color: var(--text);
    width: 34px;
    height: 30px;
    cursor: pointer;
    z-index: 1;
    font-size: 18px;
    left: 0;
    top: 0;
    align-items: center;
    transition: background var(--dur-med), border-color var(--dur-med), transform var(--dur-med);
}
.tb-search { width:0%; height:29px; padding:6px 8px 6px 24px; border-radius:6px; border:1px solid rgba(255,255,255,0.1); background:rgba(255,255,255,0.02); color:var(--text); outline:none; font-size:13px; transition:border-color .2s, background .2s, width .2s, padding .2s; }
.tb-search::placeholder { color: color-mix(in srgb, var(--text), transparent 40%); }
.tb-search:hover { border-color: color-mix(in srgb, var(--accent) 50%, #fff3 50%); background:rgba(255,255,255,0.1); }
.tb-search:focus { background: rgb(var(--bg)); border-color: transparent; width:250px; padding:6px 6px 6px 28px; }
.titlebar-search:has(.tb-search:focus) { width: auto; max-width:300px; }
.titlebar-search.search-active .tb-search { background: rgb(var(--bg)); border-color:transparent; color:var(--text-dark); outline:none; box-shadow: 0 2px 4px -2px rgba(0, 0, 0, .2); }
.titlebar-search:active {
    transform: scale(.9);
}
.titlebar-search:not(.search-active) .tb-search::placeholder { opacity: 0; }
.titlebar-search.search-active .tb-search:focus { border-color:transparent; }
.titlebar-search.search-active .tb-search-icon { color:var(--text-dark); }

/* Window buttons */
.tb-btn { --tbw-color:#fff0; border:none; width:46px; background:transparent; color:#fffa; height:100%;  }
.tb-btn:hover { --tbw-color: var(--app-border-color); background:rgba(255,255,255,0.2); color:#fff; }
.tb-close:hover { background:#ff1b1b98; }
.tb-btn:active::before { content:""; position:absolute; inset:0; background:#222; z-index:-1; }

.titlebar-window-buttons {
    height: 100%;
    display: flex;
    align-items: flex-start;
}